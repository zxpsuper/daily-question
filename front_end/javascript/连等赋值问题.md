## 连等赋值问题

### 如下代码，输出结果为何？

```js
var a = { n: 1 };
var b = a;
a.x = a = { n: 2 };
// a ? b ? a.x ? 结果是什么？
```

### 解答

- 我们可以先尝试交换下连等赋值顺序（a = a.x = {n: 2};），可以发现输出不变，即顺序不影响结果。

- 那么现在来解释对象连等赋值的问题：

  - 按照 es5 规范，题中连等赋值等价于 a.x = (a = { n: 2 });

  - 按优先获取左引用（lref），然后获取右引用（rref）的顺序，a.x 和 a 中的 a 都指向了{ n: 1 }。
  - 至此，至关重要或者说最迷惑的一步明确。(a = {n: 2}) 执行完成后，变量 a 指向{n: 2}，**并返回{n: 2}**;

  - 接着执行 a.x = { n: 2 }，这里的 a 就是 b（指向{ n: 1 }），所以 b.x 就指向了{ n: 2 }。

  - 赋值时有返回该值， 如 `a = 4 // return 4` , 赋值变量 `let n = 5 //return undefinded`

### 结果如下

```js
// a = { n: 2 };
// b = { n: 1, x: { n: 2 } };
// a.x = undefinded;
```
